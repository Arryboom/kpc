{
    "setting": {
        "title": "菜单项添加Checkbox",
        "order": 6
    },
    "catalogs": [],
    "contents": "<p>在<code>DropdownItem</code>中使用<code>Checkbox</code>，需要注意的是：</p>\n<p>如果给<code>DropdownItem</code>绑定<code>select</code>事件，该事件会触发两次，这是因为，<code>Checkbox</code>会使用<code>label</code>包裹<code>input</code>元素，两次事件，一次来源于<code>label</code>，另一次来源于<code>input</code>，所以当你需要自己在<code>select</code>中处理选中的值时，需要阻止<code>label</code> <code>click</code>事件的默认行为</p>\n<blockquote>\n<p><code>Radio</code>也类似</p>\n</blockquote>\n",
    "codes": [
        {
            "language": "vdt",
            "content": "import {Dropdown, DropdownMenu, DropdownItem} from 'kpc/components/dropdown';\nimport Checkbox from 'kpc/components/checkbox';\nimport Button from 'kpc/components/button';\n\n<div>\n    <Dropdown>\n        <Button>More ></Button>\n        <DropdownMenu class=\"checkbox-menu\">\n            <DropdownItem hideOnSelect={{ false }} ev-select={{ self._onSelect }}>\n                <Checkbox v-model=\"checked\" trueValue=\"1\">item 1</Checkbox>\n            </DropdownItem>\n            <DropdownItem hideOnSelect={{ false }} ev-select={{ self._onSelectAndPreventDefault }}>\n                <Checkbox v-model=\"checked\" trueValue=\"2\">item 2</Checkbox>\n            </DropdownItem>\n            <DropdownItem hideOnSelect={{ false }}>\n                <Checkbox v-model=\"checked\" trueValue=\"3\">item 3</Checkbox>\n            </DropdownItem>\n        </DropdownMenu>\n    </Dropdown>\n</div>"
        },
        {
            "language": "styl",
            "content": "/.k-dropdown-menu.checkbox-menu\n    .k-item\n        padding 0\n    .k-checkbox\n        padding 8px 16px"
        },
        {
            "language": "js",
            "content": "import Intact from 'intact';\nimport template from './index.vdt';\nimport './index.styl'; \n\nexport default class extends Intact {\n    @Intact.template()\n    static template = template;\n\n    defaults() {\n        return { checked: [] };\n    }\n\n    _onSelect(c, e) {\n        console.log('allowDefault', e);\n    }\n\n    _onSelectAndPreventDefault(c, e) {\n        e.preventDefault();\n        console.log('preventDefault', e);\n\n        const checked = this.get('checked').slice(0);\n        const index = checked.indexOf('2');\n        if (index > -1) {\n            checked.splice(index, 1);\n        } else {\n            checked.push('2');\n        }\n        this.set('checked', checked);\n    }\n}"
        }
    ],
    "index": 112,
    "highlighted": [
        {
            "language": "vdt",
            "content": "<pre><code class=\"hljs jsx\"><span class=\"hljs-keyword\">import</span> {Dropdown, DropdownMenu, DropdownItem} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/dropdown'</span>;\n<span class=\"hljs-keyword\">import</span> Checkbox <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/checkbox'</span>;\n<span class=\"hljs-keyword\">import</span> Button <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/button'</span>;\n\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Dropdown</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span>&gt;</span>More &gt;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Button</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownMenu</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"checkbox-menu\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">false</span> }} <span class=\"hljs-attr\">ev-select</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">self._onSelect</span> }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"1\"</span>&gt;</span>item 1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">false</span> }} <span class=\"hljs-attr\">ev-select</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">self._onSelectAndPreventDefault</span> }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"2\"</span>&gt;</span>item 2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">false</span> }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"3\"</span>&gt;</span>item 3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownMenu</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Dropdown</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span></code></pre>"
        },
        {
            "language": "styl",
            "content": "<pre><code class=\"hljs styl\">/<span class=\"hljs-selector-class\">.k-dropdown-menu</span><span class=\"hljs-selector-class\">.checkbox-menu</span>\n    <span class=\"hljs-selector-class\">.k-item</span>\n        <span class=\"hljs-attribute\">padding</span> <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-selector-class\">.k-checkbox</span>\n        <span class=\"hljs-attribute\">padding</span> <span class=\"hljs-number\">8px</span> <span class=\"hljs-number\">16px</span></code></pre>"
        },
        {
            "language": "js",
            "content": "<pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> Intact <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'intact'</span>;\n<span class=\"hljs-keyword\">import</span> template <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./index.vdt'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.styl'</span>; \n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Intact</span> </span>{\n    @Intact.template()\n    <span class=\"hljs-keyword\">static</span> template = template;\n\n    defaults() {\n        <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">checked</span>: [] };\n    }\n\n    _onSelect(c, e) {\n        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'allowDefault'</span>, e);\n    }\n\n    _onSelectAndPreventDefault(c, e) {\n        e.preventDefault();\n        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'preventDefault'</span>, e);\n\n        <span class=\"hljs-keyword\">const</span> checked = <span class=\"hljs-keyword\">this</span>.get(<span class=\"hljs-string\">'checked'</span>).slice(<span class=\"hljs-number\">0</span>);\n        <span class=\"hljs-keyword\">const</span> index = checked.indexOf(<span class=\"hljs-string\">'2'</span>);\n        <span class=\"hljs-keyword\">if</span> (index &gt; <span class=\"hljs-number\">-1</span>) {\n            checked.splice(index, <span class=\"hljs-number\">1</span>);\n        } <span class=\"hljs-keyword\">else</span> {\n            checked.push(<span class=\"hljs-string\">'2'</span>);\n        }\n        <span class=\"hljs-keyword\">this</span>.set(<span class=\"hljs-string\">'checked'</span>, checked);\n    }\n}</code></pre>"
        }
    ]
}